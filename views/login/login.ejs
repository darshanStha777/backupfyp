<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Form validation in HTML & CSS | CodingNepal</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');
        * {
            margin: 0;
            padding: 0;
            font-family: "Poppins", sans-serif;
        }
        
        body {
            background-color: #5372F0 !important;
        }
    </style>
    <link rel="stylesheet" href="/vendor/bootstrap.min.css">
</head>

<body>

    <div class="wrapper">

        <div class="container-fluid vh-100">
            <div class="row vh-100 d-flex align-content-center mt-5">
                <div class="col-2 offset-5 bg-light p-2">
                    <form method="post" action="/postlogin">
                        <div class="row text-center">
                            <h2 class="text-light">Login</h2>
                        </div>
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="exampleInputEmail1" name="email" aria-describedby="emailHelp">
                        </div>
                        <div class="mb-3">
                            <label for="exampleInputPassword1" class="form-label">Password</label>
                            <input type="password" class="form-control" name="password" id="exampleInputPassword1">
                        </div>
                        <div class="mb-3">
                            <label for="usertype" class="form-label">User Type</label>

                            <select class="form-select" id="usertype" name="usertype">
                            <option value="employee">Employee</option>
                            <option value="client">Client</option>
                            <option value="admin">admin</option>
                        </select>
                        </div>

                        <div class="m-2 d-flex justify-content-center">
                            <button type="submit" class="btn btn-primary">Login</button>
                        </div>

                    </form>
                </div>
            </div>

        </div>
    </div>
    <!-- <script>
        const form = document.querySelector("form");
        eField = form.querySelector(".email"),
            eInput = eField.querySelector("input"),
            pField = form.querySelector(".password"),
            pInput = pField.querySelector("input");

        form.onsubmit = (e) => {
            e.preventDefault(); //preventing from form submitting
            //if email and password is blank then add shake class in it else call specified function
            (eInput.value == "") ? eField.classList.add("shake", "error"): checkEmail();
            (pInput.value == "") ? pField.classList.add("shake", "error"): checkPass();

            setTimeout(() => { //remove shake class after 500ms
                eField.classList.remove("shake");
                pField.classList.remove("shake");
            }, 500);

            eInput.onkeyup = () => {
                    checkEmail();
                } //calling checkEmail function on email input keyup
            pInput.onkeyup = () => {
                    checkPass();
                } //calling checkPassword function on pass input keyup

            function checkEmail() { //checkEmail function
                let pattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/; //pattern for validate email
                if (!eInput.value.match(pattern)) { //if pattern not matched then add error and remove valid class
                    eField.classList.add("error");
                    eField.classList.remove("valid");
                    let errorTxt = eField.querySelector(".error-txt");
                    //if email value is not empty then show please enter valid email else show Email can't be blank
                    (eInput.value != "") ? errorTxt.innerText = "Enter a valid email address": errorTxt.innerText = "Email can't be blank";
                } else { //if pattern matched then remove error and add valid class
                    eField.classList.remove("error");
                    eField.classList.add("valid");
                }
            }

            function checkPass() { //checkPass function
                if (pInput.value == "") { //if pass is empty then add error and remove valid class
                    pField.classList.add("error");
                    pField.classList.remove("valid");
                } else { //if pass is empty then remove error and add valid class
                    pField.classList.remove("error");
                    pField.classList.add("valid");
                }
            }

            //if eField and pField doesn't contains error class that mean user filled details properly
            if (!eField.classList.contains("error") && !pField.classList.contains("error")) {
                window.location.href = form.getAttribute("action"); //redirecting user to the specified url which is inside action attribute of form tag
            }
        }
    </script> -->

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <% if(loginMessage) {%>
        <script>
            Toastify({
                text: "Login Failed",
                backgroundColor: "rgba(255,0,0)",

                duration: 1000,
                className: "Error",
                offset: {
                    x: 700, // horizontal axis - can be a number or a string indicating unity. eg: '2em'
                    y: 650 // vertical axis - can be a number or a string indicating unity. eg: '2em'
                },
            }).showToast();
        </script>
        <% } %>
</body>

</html>